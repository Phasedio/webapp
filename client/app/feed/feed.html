<section>
<div class="">

	<div class="container-fluid">
		<div class="row">
			<div ng-include="'components/sidebar/sidebar.html'"></div>
			<div class="content__area">
	      <div ng-include="'components/content-nav/content-nav.html'"></div>
				<div class="col-xs-12 col-md-5 col-lg-6 ph-update-area">
					<div class="action__container">
						<form name="taskForm" ng-submit="addTask(task)" novalidation>
							<div class="status__compose">
								<p class="status__title">Update Status</p>
									<input
									type="text"
									class="inputArea"
									name="name"
									ng-focus="submitTip = true"
									ng-blur="submitTip = false"
									autocomplete="off"
									placeholder="What are you up to?"
									ng-model="task.name"
									ng-trim="false">

							</div>
							<div class="status__meta">
								<div class="meta__left">
									<button type="button" class="btn" name="button" ng-click="moreCat()" data-toggle="tooltip" data-placement="bottom" data-delay="{'show':500,'hide':100}" title="Add Category"><i class="fa fa-tag"></i></button>
									<button type="button" class="btn" ng-class="{btn__active : selectedTask.name}" name="button" ng-click="moreTasks()" data-toggle="tooltip" data-placement="bottom" data-delay="{'show':500,'hide':100}" title="Add Task"><i class="fa fa-tasks"></i> <small>{{selectedTask.name | limitTo:15}}</small></button>
								</div>
								<div class="meta__right">
									<input type="submit" class="button-phasedFB" name="name" value="Post">
								</div>

							</div>

						</form>

					</div>
					<div class="feed__container">
						<p align="center">Recent updates</p>
						<div class="member__activity " ng-repeat="item in team.statuses | orderObjectBy : 'time' : true | limitTo : 100 ">
							<div class="activity__person clearfix">
								<img src="{{$parent.team.members[item.user].pic}}" alt="{{$parent.team.members[item.user].name}}" />
								<div class="activity__info">
									<h5 class="">
										<a href="/profile/{{item.user}}">{{$parent.team.members[item.user].name}}</a>
										<span class="activity__tag" ng-if="item.task.name">
											<a href="/tasks/{{item.task.project}}/{{item.task.column}}/{{item.task.card}}/{{item.task.id}}">
												<small>
													<i class="fa fa-tasks"></i>
													<!-- <span role="presentation" aria-hidden="true"> · </span> -->
													{{item.task.name | limitTo:50}}
												</small>
											</a>


										</span>
								</h5>
									<p class="activity__meta">
										<span am-time-ago="item.time"></span>
										<!-- <span class="" ng-if="item.task.name">
											<span role="presentation" aria-hidden="true"> · </span>
											{{item.task.name}}
										</span> -->

									</p>
								</div>
								<div class="activity__options" ng-if="item.user == myID">
									<div class="btn-group">
									  <button type="button" class="btn btn-drop-chevron dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
									    <i class="fa fa-angle-down"></i>
									  </button>
									  <ul class="dropdown-menu">
									    <li><a href="#" data-toggle="modal" data-target="#editModal" ng-click="editStatusSelected(item)">Edit status</a></li>
									    <li ng-if="item.user == myID" role="separator" class="divider"></li>
									    <li ng-if="item.user == myID"><a href="#" data-toggle="modal" data-target="#deleteModal" ng-click="deleteSelected(item)">Delete Status</a></li>
									  </ul>
									</div>
								</div>
							</div>

							<div class="activity__content">
								<p class="">{{item.name}}</p>
							</div>

							<div class="activity__int">
								<button type="button" class="btn activity__int__btn activity__int__like" ng-class="{active : item.likes[myID]}" name="button" ng-click="likeStatus(item)" data-toggle="tooltip" data-placement="bottom" title="{{showLikers(item.likes)}}"><i class="fa fa-thumbs-o-up"></i> Like <span class="badge">{{countLikes(item.likes)}}</span></button>
								<button type="button" class="btn activity__int__btn activity__int__comment" name="button"><i class="fa fa-comment-o"></i> Comment <span class="badge">4</span></button>
							</div>
						</div>
					</div>

				</div>
				<div class="hidden-xs hidden-sm   col-md-3  ">
						<div class="ph-card">
							<h6>Number of tasks assigned to you</h6>
							<h2>{{countActiveTasks}}</h2>
							<a class="btn btn-phased-blue btn-block" href="/tasks">View Tasks</a>
						</div>
				</div>
			</div>



			</div>


		</div>
</div>

<!--Categories Modal-->
<div class="modal fade" id="catModal">
<div class="modal-dialog" style="width:60%">
	<div class="modal-content">
		<div class="modal-header">
			<button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
			<h4 class="modal-title no-shadow">Choose a Category </h4>
		</div>
		<div class="modal-body switchTeam" >
			<div ng-repeat="(key, category) in team.categoryObj" >
				<button class="btn btn-block button-phased" style="outline: none; " ng-click="categoryChoice(key,true)">
					<div class="row" style="padding:2%;">
						<div class="col-xs-1" style="padding-top:1%">
							<div class="feed-cat-color" style="width: 1rem; height: 1rem; display: inline-block; background-color:{{category.color}}"></div>
						</div>
						<div style="text-align:left; padding-left:2%; padding-top:6px;" class="col-xs-10">
							<h5>{{category.name}}</h5>
						</div>
					</div>
				</button>
			</div>
			<div >
				<button class="btn btn-block button-phased" style="outline: none; " ng-click="addNewCat()">
					<div class="row" style="padding:2%;">
						<div class="col-xs-1" style="padding-top:1%">
							<div class="feed-cat-color" style="width: 1rem; height: 1rem; display: inline-block; background-color:{{category.color}}"></div>
						</div>
						<div style="text-align:left; padding-left:2%; padding-top:6px;" class="col-xs-10">
							<h5>Add or Modify a Category</h5>
						</div>
					</div>
				</button>
			</div>
		</div>
	</div><!-- /.modal-content -->
</div><!-- /.modal-dialog -->
</div><!-- /.modal -->

<!--Tasks Modal-->
<div class="modal fade" id="taskModal">
<div class="modal-dialog" style="width:60%">
	<div class="modal-content">
		<div class="modal-header">
			<button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
			<h4 class="modal-title no-shadow">Choose a Task </h4>
		</div>
		<div class="modal-body " >
			<ul>
				<li class="task__item" ng-if="selectedTask.name" ng-click="cleartaskChoice()">
					<div class="task__item__title">
						<h4>clear selection</h4>
					</div> </li>
				<li class="task__item" ng-repeat="assignment in getUserTasks |
				orderObjectBy : 'time' : true"  ng-click="taskChoice(assignment)">
					<div class="task__item__title">
						<h4>{{assignment.name}}</h4>
					</div>
					<div class="">
						<p>
							{{Phased.task.STATUS[assignment.status]}} {{assignment.deadline | date : 'd MMM yy'}}
						</p>
					</div>
				</li>
			</ul>

		</div>
	</div><!-- /.modal-content -->
</div><!-- /.modal-dialog -->
</div><!-- /.modal -->

<!--Tasks Modal-->
<div class="modal fade" id="deleteModal">
<div class="modal-dialog" style="width:60%">
	<div class="modal-content">
		<div class="modal-header">
			<button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
			<h4 class="modal-title no-shadow">Delete Post</h4>
		</div>
		<div class="modal-body " >
			<p>
				Are you sure you want to delete this?
			</p>

		</div>
		<div class="modal-footer">
      <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
      <button type="button" class="btn btn-primary" data-dismiss="modal" ng-click="deleteTask(deleteHolder)">Delete Post</button>
    </div>
	</div><!-- /.modal-content -->
</div><!-- /.modal-dialog -->
</div><!-- /.modal -->

<!--Tasks Modal-->
<div class="modal fade" id="editModal">
<div class="modal-dialog modal-sm" >
	<div class="modal-content">
		<form ng-submit="editStatus()">
		<div class="modal-header">
			<button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
			<h4 class="modal-title no-shadow">Edit Status Post</h4>
		</div>
		<div class="modal-body " >

			  <div class="form-group">
			    <label for="exampleInputEmail1">What are you up to?</label>
			    <textarea class="form-control" rows="3" ng-model="editHolder.name">{{editHolder.name}}</textarea>
			  </div>
			  <div class="form-group">
			    <label for="exampleInputFile">Category</label>
					<select class="form-control" ng-model="editHolder.cat">
					  <option>None</option>
						<option ng-repeat="(key, category) in team.categoryObj" value="{{key}}">{{category.name}} </option>
					</select>
			  </div>
				<div class="form-group">
			    <label for="exampleInputFile">Task</label>
					<select class="form-control" ng-model="editHolder.task.id" >
					  <option>None</option>
					  <option ng-repeat="assignment in getUserTasks | orderObjectBy : 'time' : true" value="{{assignment.id}}">{{assignment.name}}</option>

					</select>
			  </div>




		</div>
		<div class="modal-footer">
      <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
      <button type="submit" class="btn btn-primary" >Submit</button>
    </div>
		</form>
	</div><!-- /.modal-content -->
</div><!-- /.modal-dialog -->
</div><!-- /.modal -->
<toaster-container toaster-options="{'time-out': 2000, 'close-button':true, 'animation-class': 'toast-top-right'}"></toaster-container>
